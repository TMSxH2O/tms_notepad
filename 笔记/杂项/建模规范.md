# 建模规范

## 用例建模规范

> **用例图关系**
>
> 此处所使用到的用例图只会涉及到5种关系：
> + 包含：用例是基用例的行为片段，是一个必须的行为
> + 实现：用于连接用例和用例实现，说明基本用例的一个实现方式
> + 拓展：功能的延伸，拓展用例为基础用例提供附加功能，这个功能是可选择性的
> + 精化：用于更加细致的描述某个用例，说明用例的更加具体属性
> + 关联：参与者知道或者使用的用例

用例建模过程中的一些规范，首先其中最常使用到的关系在其中的展示主要分为以下的几个大类：

+ ***虚线***

    虚线上一般会带有具体的描述，根据描述的不同其表示的含义也不同：

    + **`<<refine>>`**

        ==精化==，用于对某个用例中更加细化的功能进行描述，方向为更加细致的用例指向笼统的用例。<u>使用子用例指向基用例。</u>

        如，在“军队行动”中存在“屯田”和“出征”两种不同的更加细化的功能，此处就需要使用“屯田”和“出征”来指向“军队行动”。

    + **`<<extend>>`**

        ==拓展==，用于表示功能上的衍生或是附加的功能。<u>基础的用例指向拓展出的用例。</u>

        如，“查询功能”中可以引出“导出查询结果”或者“打印查询结果”，此处就使用“查询功能”指向拓展出的“导出查询结果”和“打印查询结果”。

+ ***实线***

    实线中同样会因为在线条上的描述而导致其表现出不同的含义。

    + **无信息**

        ==关联==，用于表示外部的参与者和用例之间的关系，即只可能是参与者指向具体的某个对外提供的需求。<u>参与者指向某个用例。</u>

    + **`<<extend>>`**

        ==拓展==，与虚线中的拓展类似，主要用于表示没有直接关系的拓展功能，即理论上的拓展关系，但是没有直接的代码功能关系。<u>使用基用例指向拓展出的其他用例。</u>

        如，“单人玩法”可以拓展“多人玩法”，使用“单人玩法”指向“多人玩法”。其中的“单人玩法”理论上可以可以拓展出“多人玩法”，但真正的实现必然是完全不同。

    + **`<<include>>`**

        ==包含==，对基础用例而言，其运行必然会被拆分出其中的多个子用例，就表示基用例包含了子用例。<u>使用基用例指向包含的子用例。</u>

        如，“启动工会战”其中必然包括“工会战匹配”、“创建工会战”和“玩家转移”这三个功能，就使用

+ ***三角箭头*（虚线）**

    ==实现==，用于表示用例之间的实现关系，基础的用例知识描述了需求的目标，而事实上需求目标有多种不同的实现方式，每种途径都能达成基础用例的需求，也就可以看作是基础用例的实现。<u>具体实现指向基础用例。</u>

    如，“招募”可以通过“购买稀有卡包”、“购买精英卡包”或“购买传说卡包”来实现，其中的任何一种都可以达成需要的目的，这就说明它们是“招募”功能的具体实现。最终让“购买稀有卡包”、“购买精英卡包”和“购买传说卡包”指向“招募”即可。


## 类图

### 类图的分类

类图具体其描述层次的不同，可以被分为三个层次：**概念层类图**、**说明层类图**和**实现层类图**。

在一般的项目中，只需要使用到**说明层类图**和**实现层类图**就足以描述整个项目的结构了。

### 说明层类图

说明层类图是与用例图连接最紧密的一层，每一个用例都能被转换成一个说明层类图，而用户的访问对应的就是对外提供的边界类。

说明层类图中主要涉及到三个不同的部分：

+ **边界类（boundary）**

    用于系统与外部环境进行交互的类，简单理解，对外部暴露的函数等就会存放在边界类中，对外会隐藏系统内部的具体逻辑。

+ **控制类（control）**

    在同一个控制类中来管理多个实体类，实现具体的业务功能。

+ **实体类（entity）**

    存放数据的单元，在其中定义了各种对数据基本操作的函数，供外部使用。

### 实现层类图

在设计层中，会对具体的代码中类的实现进行描述，其中的关系分为六类：

+ ==泛化== 空心三角 + 实线

    表示的是一种继承关系，<u>通过子类指向自己的父类</u>（参考的是 java 中的 `extend` 包括子接口指向父接口，与之后的实现 `interface` 做出区别）。

+ ==实现== 空心三角 + 虚线

    表示的是一种实现关系，特指子类实现一个接口，<u>通过实现类指向接口</u>

    > **泛化 vs. 实现**
    >
    > 最好理解的就是结合 java 进行理解，泛化表示 `extend` 实现关键字表示 `interface` 关键字。

+ ==关联== 实线

    表示的是一种拥有 `has-a` 关系，类中的成员变量使用了另一个类对象。在其中还包括双向关联，两者之间通过成员变量的方式实现了双向的关联。

    在线条上的数字表示的是对应的数量关系，如，“学生”和“书”，“学生”都有很多本“书”，因此关系就是“学生”指向了“书”（书不可能存储学生的信息，因此不可能双向关联），同时“学生”侧标注1，“书”侧标注 `1..n`。

+ ==聚合== 空心菱形 + 实线

    <u>**聚合**是某种特殊的**关联**关系</u>，在关联的基础上，强调了其中的主次关系，将其他类作为成员变量，而自己的通过这种方式，所表示的是这个整体。（因为有明显的主从关系，不可能出现双向聚合）

    <u>空心菱形靠近整体</u>

    > 在代码中所体现出的效果与关联基本上是一致的，主要是强调“整体”与“局部”这个概念。

+ ==组合== 实心菱形 + 实线

    **组合** 是在 **聚合** 的基础上的又一特殊情况，在聚合的基础之上，强调局部不能单独存在，其余部分没有区别。

+ ==依赖== 虚线

    通过在函数的参数、局部变量等任何形式的使用了其他的类对象，就形成了依赖关系。

    因此，<u>其他的任何关系都只是比较特殊的依赖关系。</u>
