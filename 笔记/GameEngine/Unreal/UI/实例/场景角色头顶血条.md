
#实例 #UI

> [!quote] 参考资料
> [【虚幻4】UE4教程_中文_入门级_UMG篇_1-15_在世界中渲染UI（AI血条）_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Mf4y1X7mh/?vd_source=129ed45fd60810580b07c07795218205)

在每个角色的头顶，显示血条UI。

# 实现流程

## 1.创建血条UI

略，可以直接看视频，做法挺多的。

## 2.添加到角色头顶

### 方法1：使用视口UI，根据3D坐标计算出屏幕坐标，显示到角色头顶

1. 打开角色 Actor，在其中添加 `Widget` 组件，将组件调整到合适的位置；
2. 选择 `Widget` 组件，在右侧属性界面的 *User Interface* 中进行以下设置；
	- 修改 *Widget Class* 为创建的血条UI文件；
	- 修改 *Space* 为 `Screen`，使UI显示到屏幕空间，不会随着角色旋转在3D空间中旋转；
	- 【可选】设置开启 *大小到内容（Draw at Desired Size* 让血条的大小与UI文件中的设置相同；

### 方法2：使用场景UI，显示在角色周围

1. 打开角色 Actor，在其中添加 `Widget` 组件，将组件调整到合适的位置；
2. 选择 `Widget` 组件，在右侧属性界面的 *User Interface* 中进行以下设置；
	- 修改 *Widget Class* 为创建的血条UI文件；
	- 修改 *Space* 为 `World`，使用场景UI，会随着角色在3D空间中旋转；
	- 【可选】设置开启 *大小到内容（Draw at Desired Size* 让血条的大小与UI文件中的设置相同；
	- 【可选】修改 *Geometry Mode*，默认是一个平面 `Plane`，可以改为圆柱状的几何体表面渲染UI，改为 `Cylinder`（用来做类刀剑神域的血条效果，但实际还是需要改材质）；
	- 【可选】开启双面渲染，在 *Rendering* 设置中，开启 `Is Two Sided`；

> [!warning] 注意
> 使用世界空间的UI时，就算开启了 *大小到内容（Draw at Desired Size）*，如果设置了 *Draw Size* 为0，它就会不再显示
> 
> <s>有没有可能是因为之前用这种潜规则来实现的场景UI不可见？</s>
> 
> 总之，场景UI必须注意将 *Draw Size* 设置为非0的值。
